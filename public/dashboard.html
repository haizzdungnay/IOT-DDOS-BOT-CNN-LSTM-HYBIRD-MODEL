<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IoT DDoS Detection - Advanced Dashboard</title>
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        /* Custom scrollbar */
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: #1e293b; }
        ::-webkit-scrollbar-thumb { background: #475569; border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: #64748b; }
        
        /* Sidebar */
        .sidebar { transition: width 0.3s ease; }
        .sidebar-item { transition: all 0.2s ease; }
        .sidebar-item:hover { background: rgba(59, 130, 246, 0.1); }
        .sidebar-item.active { background: rgba(59, 130, 246, 0.2); border-left: 3px solid #3b82f6; }
        
        /* Cards */
        .stat-card { transition: all 0.3s ease; }
        .stat-card:hover { transform: translateY(-2px); box-shadow: 0 10px 40px rgba(0,0,0,0.3); }
        
        /* Model ranking badges */
        .ranking-gold { background: linear-gradient(135deg, #fbbf24, #f59e0b); }
        .ranking-silver { background: linear-gradient(135deg, #9ca3af, #6b7280); }
        .ranking-bronze { background: linear-gradient(135deg, #d97706, #b45309); }
        
        /* Pulse animation */
        .pulse-green { animation: pulse-green 2s infinite; }
        @keyframes pulse-green {
            0%, 100% { box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.4); }
            50% { box-shadow: 0 0 0 8px rgba(34, 197, 94, 0); }
        }
        
        /* Tab content */
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        
        /* Progress bar animation */
        .progress-bar { transition: width 0.5s ease; }
        
        /* Log container */
        .log-container { font-family: 'Courier New', monospace; font-size: 12px; }
        
        /* Metric table */
        .metric-table th, .metric-table td { padding: 12px 16px; }
        .metric-table tr:hover { background: rgba(59, 130, 246, 0.1); }
    </style>
</head>
<body class="bg-slate-900 text-gray-100 min-h-screen">
    <div class="flex">
        <!-- Sidebar -->
        <aside class="sidebar w-64 bg-slate-800 min-h-screen fixed left-0 top-0 z-50">
            <div class="p-4 border-b border-slate-700">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center">
                        <i class="fas fa-shield-alt text-white"></i>
                    </div>
                    <div>
                        <h1 class="font-bold text-lg">IoT Security</h1>
                        <p class="text-xs text-gray-400">DDoS Detection</p>
                    </div>
                </div>
            </div>
            
            <nav class="p-4 space-y-2">
                <a href="#" onclick="showTab('dashboard')" class="sidebar-item active flex items-center gap-3 p-3 rounded-lg" data-tab="dashboard">
                    <i class="fas fa-chart-line w-5"></i>
                    <span>Dashboard</span>
                </a>
                <a href="#" onclick="showTab('models')" class="sidebar-item flex items-center gap-3 p-3 rounded-lg" data-tab="models">
                    <i class="fas fa-brain w-5"></i>
                    <span>Model Evaluation</span>
                </a>
                <a href="#" onclick="showTab('realtime')" class="sidebar-item flex items-center gap-3 p-3 rounded-lg" data-tab="realtime">
                    <i class="fas fa-broadcast-tower w-5"></i>
                    <span>Real-time Monitor</span>
                </a>
                <a href="#" onclick="showTab('training')" class="sidebar-item flex items-center gap-3 p-3 rounded-lg" data-tab="training">
                    <i class="fas fa-cogs w-5"></i>
                    <span>Training</span>
                </a>
                <a href="#" onclick="showTab('dataset')" class="sidebar-item flex items-center gap-3 p-3 rounded-lg" data-tab="dataset">
                    <i class="fas fa-database w-5"></i>
                    <span>Dataset Manager</span>
                </a>
                <a href="#" onclick="showTab('compare')" class="sidebar-item flex items-center gap-3 p-3 rounded-lg" data-tab="compare">
                    <i class="fas fa-balance-scale w-5"></i>
                    <span>Compare Results</span>
                </a>
                <a href="#" onclick="showTab('history')" class="sidebar-item flex items-center gap-3 p-3 rounded-lg" data-tab="history">
                    <i class="fas fa-history w-5"></i>
                    <span>History & Reports</span>
                </a>
            </nav>
            
            <!-- System Status -->
            <div class="absolute bottom-0 left-0 right-0 p-4 border-t border-slate-700">
                <div class="flex items-center gap-2 text-sm">
                    <span id="systemStatus" class="w-2 h-2 rounded-full bg-green-500 pulse-green"></span>
                    <span id="systemDevice" class="text-gray-400">Loading...</span>
                </div>
            </div>
        </aside>
        
        <!-- Main Content -->
        <main class="ml-64 flex-1 p-6">
            <!-- Header -->
            <header class="flex justify-between items-center mb-6">
                <div>
                    <h2 id="pageTitle" class="text-2xl font-bold">Dashboard</h2>
                    <p id="pageSubtitle" class="text-gray-400">Tổng quan hệ thống phát hiện DDoS</p>
                </div>
                <div class="flex items-center gap-4">
                    <span class="text-sm text-gray-400">
                        <i class="far fa-clock mr-1"></i>
                        <span id="currentTime"></span>
                    </span>
                    <button onclick="refreshData()" class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg transition">
                        <i class="fas fa-sync-alt mr-2"></i>Refresh
                    </button>
                </div>
            </header>
            
            <!-- Tab: Dashboard -->
            <div id="tab-dashboard" class="tab-content active">
                <!-- Quick Stats -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6">
                    <div class="stat-card bg-gradient-to-br from-blue-600 to-blue-800 rounded-xl p-6">
                        <div class="flex justify-between items-start">
                            <div>
                                <p class="text-blue-200 text-sm">Models Loaded</p>
                                <p id="statModels" class="text-3xl font-bold mt-1">0</p>
                            </div>
                            <div class="w-12 h-12 bg-blue-500/30 rounded-lg flex items-center justify-center">
                                <i class="fas fa-brain text-xl"></i>
                            </div>
                        </div>
                    </div>
                    <div class="stat-card bg-gradient-to-br from-green-600 to-green-800 rounded-xl p-6">
                        <div class="flex justify-between items-start">
                            <div>
                                <p class="text-green-200 text-sm">Best Accuracy</p>
                                <p id="statAccuracy" class="text-3xl font-bold mt-1">-</p>
                            </div>
                            <div class="w-12 h-12 bg-green-500/30 rounded-lg flex items-center justify-center">
                                <i class="fas fa-check-circle text-xl"></i>
                            </div>
                        </div>
                    </div>
                    <div class="stat-card bg-gradient-to-br from-purple-600 to-purple-800 rounded-xl p-6">
                        <div class="flex justify-between items-start">
                            <div>
                                <p class="text-purple-200 text-sm">Lowest FPR</p>
                                <p id="statFPR" class="text-3xl font-bold mt-1">-</p>
                            </div>
                            <div class="w-12 h-12 bg-purple-500/30 rounded-lg flex items-center justify-center">
                                <i class="fas fa-bullseye text-xl"></i>
                            </div>
                        </div>
                    </div>
                    <div class="stat-card bg-gradient-to-br from-orange-600 to-orange-800 rounded-xl p-6">
                        <div class="flex justify-between items-start">
                            <div>
                                <p class="text-orange-200 text-sm">Training Sessions</p>
                                <p id="statTrainings" class="text-3xl font-bold mt-1">0</p>
                            </div>
                            <div class="w-12 h-12 bg-orange-500/30 rounded-lg flex items-center justify-center">
                                <i class="fas fa-graduation-cap text-xl"></i>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Model Comparison Table (like the image) -->
                <div class="bg-slate-800 rounded-xl p-6 mb-6">
                    <h3 class="text-xl font-bold mb-4 flex items-center gap-2">
                        <i class="fas fa-trophy text-yellow-500"></i>
                        Model Performance Ranking
                    </h3>
                    <div class="overflow-x-auto">
                        <table class="metric-table w-full">
                            <thead>
                                <tr class="border-b border-slate-700 text-left">
                                    <th class="text-gray-400 font-medium">Model</th>
                                    <th class="text-gray-400 font-medium">Accuracy</th>
                                    <th class="text-gray-400 font-medium">FPR</th>
                                    <th class="text-gray-400 font-medium">FNR</th>
                                    <th class="text-gray-400 font-medium">ROC-AUC</th>
                                    <th class="text-gray-400 font-medium">Ranking</th>
                                </tr>
                            </thead>
                            <tbody id="modelRankingTable">
                                <tr><td colspan="6" class="text-center text-gray-500 py-8">Loading...</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- Charts Row -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div class="bg-slate-800 rounded-xl p-6">
                        <h3 class="text-lg font-bold mb-4">
                            <i class="fas fa-chart-bar text-blue-400 mr-2"></i>
                            Accuracy Comparison
                        </h3>
                        <div style="height: 300px;">
                            <canvas id="accuracyChart"></canvas>
                        </div>
                    </div>
                    <div class="bg-slate-800 rounded-xl p-6">
                        <h3 class="text-lg font-bold mb-4">
                            <i class="fas fa-chart-pie text-green-400 mr-2"></i>
                            Error Rates
                        </h3>
                        <div style="height: 300px;">
                            <canvas id="errorRatesChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Tab: Model Evaluation -->
            <div id="tab-models" class="tab-content">
                <!-- Model Cards -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-6" id="modelCardsContainer">
                    <!-- Cards will be generated dynamically -->
                </div>
                
                <!-- Evaluation Controls -->
                <div class="bg-slate-800 rounded-xl p-6 mb-6">
                    <h3 class="text-xl font-bold mb-4">
                        <i class="fas fa-play-circle text-green-400 mr-2"></i>
                        Run Evaluation
                    </h3>
                    <div class="flex flex-wrap gap-4 items-end">
                        <div>
                            <label class="block text-sm text-gray-400 mb-2">Select Models</label>
                            <div id="evalModelsContainer" class="flex flex-wrap gap-3">
                                <!-- Models will be loaded dynamically -->
                                <span class="text-gray-500 text-sm">Loading models...</span>
                            </div>
                        </div>
                        <button onclick="runEvaluation()" id="evalBtn" class="bg-green-600 hover:bg-green-700 px-6 py-2 rounded-lg transition">
                            <i class="fas fa-play mr-2"></i>Start Evaluation
                        </button>
                    </div>
                </div>
                
                <!-- Detailed Metrics Table -->
                <div class="bg-slate-800 rounded-xl p-6">
                    <h3 class="text-xl font-bold mb-4">
                        <i class="fas fa-table text-blue-400 mr-2"></i>
                        Detailed Metrics
                    </h3>
                    <div class="overflow-x-auto">
                        <table class="metric-table w-full">
                            <thead>
                                <tr class="border-b border-slate-700 text-left">
                                    <th>Model</th>
                                    <th>Accuracy</th>
                                    <th>Precision</th>
                                    <th>Recall</th>
                                    <th>F1-Score</th>
                                    <th>FPR</th>
                                    <th>FNR</th>
                                    <th>ROC-AUC</th>
                                </tr>
                            </thead>
                            <tbody id="detailedMetricsTable">
                                <tr><td colspan="8" class="text-center text-gray-500 py-8">Loading...</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            
            <!-- Tab: Real-time Monitor -->
            <div id="tab-realtime" class="tab-content">
                <!-- Control Panel -->
                <div class="bg-slate-800 rounded-xl p-6 mb-6">
                    <h3 class="text-xl font-bold mb-4">
                        <i class="fas fa-gamepad text-purple-400 mr-2"></i>
                        Replay Control
                    </h3>
                    <div class="flex flex-wrap gap-4 items-center">
                        <button onclick="startReplay()" id="startBtn" class="bg-green-600 hover:bg-green-700 px-6 py-2 rounded-lg transition">
                            <i class="fas fa-play mr-2"></i>Start Replay
                        </button>
                        <button onclick="stopReplay()" id="stopBtn" disabled class="bg-red-600 hover:bg-red-700 px-6 py-2 rounded-lg transition disabled:opacity-50">
                            <i class="fas fa-stop mr-2"></i>Stop
                        </button>
                        <select id="speedSelect" class="bg-slate-700 border border-slate-600 rounded-lg px-4 py-2">
                            <option value="0.01">Fast (0.01s)</option>
                            <option value="0.05">Medium (0.05s)</option>
                            <option value="0.1" selected>Normal (0.1s)</option>
                            <option value="0.5">Slow (0.5s)</option>
                        </select>
                        <div class="flex-1"></div>
                        <div class="text-right">
                            <p class="text-sm text-gray-400">Packets Processed</p>
                            <p id="packetCount" class="text-2xl font-bold text-blue-400">0</p>
                        </div>
                    </div>
                </div>
                
                <!-- Live Model Cards -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                    <div id="liveCardCNN" class="bg-slate-800 rounded-xl p-6 border-2 border-slate-700">
                        <div class="flex justify-between items-center mb-4">
                            <h4 class="font-bold text-blue-400"><i class="fas fa-brain mr-2"></i>CNN</h4>
                            <span id="liveCnnStatus" class="text-2xl">⚪</span>
                        </div>
                        <div class="space-y-3">
                            <div class="flex justify-between">
                                <span class="text-gray-400">Prediction:</span>
                                <span id="liveCnnPred" class="font-bold">-</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-400">Confidence:</span>
                                <span id="liveCnnConf" class="font-bold">-</span>
                            </div>
                            <div class="w-full bg-slate-700 rounded-full h-2">
                                <div id="liveCnnProgress" class="bg-blue-600 h-2 rounded-full transition-all" style="width: 0%"></div>
                            </div>
                            <div class="grid grid-cols-2 gap-2 pt-2 border-t border-slate-700">
                                <div class="text-center">
                                    <p class="text-xs text-gray-400">Correct</p>
                                    <p id="liveCnnCorrect" class="text-green-400 font-bold">0</p>
                                </div>
                                <div class="text-center">
                                    <p class="text-xs text-gray-400">Wrong</p>
                                    <p id="liveCnnWrong" class="text-red-400 font-bold">0</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div id="liveCardLSTM" class="bg-slate-800 rounded-xl p-6 border-2 border-slate-700">
                        <div class="flex justify-between items-center mb-4">
                            <h4 class="font-bold text-green-400"><i class="fas fa-network-wired mr-2"></i>LSTM</h4>
                            <span id="liveLstmStatus" class="text-2xl">⚪</span>
                        </div>
                        <div class="space-y-3">
                            <div class="flex justify-between">
                                <span class="text-gray-400">Prediction:</span>
                                <span id="liveLstmPred" class="font-bold">-</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-400">Confidence:</span>
                                <span id="liveLstmConf" class="font-bold">-</span>
                            </div>
                            <div class="w-full bg-slate-700 rounded-full h-2">
                                <div id="liveLstmProgress" class="bg-green-600 h-2 rounded-full transition-all" style="width: 0%"></div>
                            </div>
                            <div class="grid grid-cols-2 gap-2 pt-2 border-t border-slate-700">
                                <div class="text-center">
                                    <p class="text-xs text-gray-400">Correct</p>
                                    <p id="liveLstmCorrect" class="text-green-400 font-bold">0</p>
                                </div>
                                <div class="text-center">
                                    <p class="text-xs text-gray-400">Wrong</p>
                                    <p id="liveLstmWrong" class="text-red-400 font-bold">0</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div id="liveCardHybrid" class="bg-slate-800 rounded-xl p-6 border-2 border-slate-700">
                        <div class="flex justify-between items-center mb-4">
                            <h4 class="font-bold text-purple-400"><i class="fas fa-bolt mr-2"></i>Hybrid</h4>
                            <span id="liveHybridStatus" class="text-2xl">⚪</span>
                        </div>
                        <div class="space-y-3">
                            <div class="flex justify-between">
                                <span class="text-gray-400">Prediction:</span>
                                <span id="liveHybridPred" class="font-bold">-</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-400">Confidence:</span>
                                <span id="liveHybridConf" class="font-bold">-</span>
                            </div>
                            <div class="w-full bg-slate-700 rounded-full h-2">
                                <div id="liveHybridProgress" class="bg-purple-600 h-2 rounded-full transition-all" style="width: 0%"></div>
                            </div>
                            <div class="grid grid-cols-2 gap-2 pt-2 border-t border-slate-700">
                                <div class="text-center">
                                    <p class="text-xs text-gray-400">Correct</p>
                                    <p id="liveHybridCorrect" class="text-green-400 font-bold">0</p>
                                </div>
                                <div class="text-center">
                                    <p class="text-xs text-gray-400">Wrong</p>
                                    <p id="liveHybridWrong" class="text-red-400 font-bold">0</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Live Chart -->
                <div class="bg-slate-800 rounded-xl p-6 mb-6">
                    <h3 class="text-lg font-bold mb-4">
                        <i class="fas fa-chart-area text-cyan-400 mr-2"></i>
                        Real-time Confidence
                    </h3>
                    <div style="height: 300px;">
                        <canvas id="liveChart"></canvas>
                    </div>
                </div>
                
                <!-- Traffic Log -->
                <div class="bg-slate-800 rounded-xl p-6">
                    <h3 class="text-lg font-bold mb-4">
                        <i class="fas fa-list text-yellow-400 mr-2"></i>
                        Live Traffic Log
                    </h3>
                    <div id="trafficLog" class="log-container h-64 overflow-y-auto bg-slate-900 rounded-lg p-4">
                        <p class="text-gray-500 text-center py-8">Waiting for replay to start...</p>
                    </div>
                </div>
            </div>
            
            <!-- Tab: Training -->
            <div id="tab-training" class="tab-content">
                <!-- Training Form -->
                <div class="bg-slate-800 rounded-xl p-6 mb-6">
                    <h3 class="text-xl font-bold mb-4">
                        <i class="fas fa-rocket text-orange-400 mr-2"></i>
                        Start New Training
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                        <div>
                            <label class="block text-sm text-gray-400 mb-2">Models to Train</label>
                            <div id="trainModelsContainer" class="space-y-2">
                                <!-- Models will be loaded dynamically -->
                                <span class="text-gray-500 text-sm">Loading models...</span>
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm text-gray-400 mb-2">Epochs</label>
                            <input type="number" id="trainEpochs" value="30" min="1" max="200" 
                                   class="w-full bg-slate-700 border border-slate-600 rounded-lg px-4 py-2">
                        </div>
                        <div>
                            <label class="block text-sm text-gray-400 mb-2">Batch Size</label>
                            <select id="trainBatchSize" class="w-full bg-slate-700 border border-slate-600 rounded-lg px-4 py-2">
                                <option value="32">32</option>
                                <option value="64" selected>64</option>
                                <option value="128">128</option>
                                <option value="256">256</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm text-gray-400 mb-2">Learning Rate</label>
                            <select id="trainLR" class="w-full bg-slate-700 border border-slate-600 rounded-lg px-4 py-2">
                                <option value="0.0001">0.0001</option>
                                <option value="0.001" selected>0.001</option>
                                <option value="0.01">0.01</option>
                            </select>
                        </div>
                    </div>
                    <div class="mt-6 flex gap-4">
                        <button onclick="startTraining()" id="trainStartBtn" class="bg-orange-600 hover:bg-orange-700 px-6 py-2 rounded-lg transition">
                            <i class="fas fa-play mr-2"></i>Start Training
                        </button>
                        <button onclick="stopTraining()" id="trainStopBtn" disabled class="bg-red-600 hover:bg-red-700 px-6 py-2 rounded-lg transition disabled:opacity-50">
                            <i class="fas fa-stop mr-2"></i>Stop Training
                        </button>
                    </div>
                </div>
                
                <!-- Training Progress -->
                <div class="bg-slate-800 rounded-xl p-6 mb-6">
                    <h3 class="text-xl font-bold mb-4">
                        <i class="fas fa-tasks text-blue-400 mr-2"></i>
                        Training Progress
                    </h3>
                    <div id="trainingProgressContainer" class="hidden">
                        <div class="flex justify-between items-center mb-2">
                            <span id="trainingCurrentModel" class="font-medium">-</span>
                            <span id="trainingEpochInfo" class="text-gray-400">Epoch 0/0</span>
                        </div>
                        <div class="w-full bg-slate-700 rounded-full h-4 mb-4">
                            <div id="trainingProgressBar" class="progress-bar bg-gradient-to-r from-blue-600 to-green-600 h-4 rounded-full" style="width: 0%"></div>
                        </div>
                        <div id="trainingStatus" class="text-sm text-gray-400">Waiting...</div>
                    </div>
                    <div id="trainingIdleMessage" class="text-center py-8 text-gray-500">
                        <i class="fas fa-hourglass-start text-4xl mb-4"></i>
                        <p>No training in progress</p>
                    </div>
                </div>
                
                <!-- Training Logs -->
                <div class="bg-slate-800 rounded-xl p-6">
                    <h3 class="text-lg font-bold mb-4">
                        <i class="fas fa-terminal text-green-400 mr-2"></i>
                        Training Logs
                    </h3>
                    <div id="trainingLogs" class="log-container h-64 overflow-y-auto bg-slate-900 rounded-lg p-4">
                        <p class="text-gray-500">Training logs will appear here...</p>
                    </div>
                </div>
            </div>
            
            <!-- Tab: Dataset Manager -->
            <div id="tab-dataset" class="tab-content">
                <!-- Current Dataset Info -->
                <div class="bg-slate-800 rounded-xl p-6 mb-6">
                    <h3 class="text-xl font-bold mb-4">
                        <i class="fas fa-database text-cyan-400 mr-2"></i>
                        Current Dataset
                    </h3>
                    <div id="datasetInfo" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                        <div class="bg-slate-700/50 rounded-lg p-4">
                            <p class="text-sm text-gray-400">Training Samples</p>
                            <p id="datasetTrainSamples" class="text-2xl font-bold text-blue-400">-</p>
                        </div>
                        <div class="bg-slate-700/50 rounded-lg p-4">
                            <p class="text-sm text-gray-400">Validation Samples</p>
                            <p id="datasetValSamples" class="text-2xl font-bold text-green-400">-</p>
                        </div>
                        <div class="bg-slate-700/50 rounded-lg p-4">
                            <p class="text-sm text-gray-400">Test Samples</p>
                            <p id="datasetTestSamples" class="text-2xl font-bold text-purple-400">-</p>
                        </div>
                        <div class="bg-slate-700/50 rounded-lg p-4">
                            <p class="text-sm text-gray-400">Features</p>
                            <p id="datasetFeatures" class="text-2xl font-bold text-orange-400">-</p>
                        </div>
                    </div>
                    
                    <!-- Class Distribution -->
                    <div class="mt-6">
                        <h4 class="font-medium mb-3">Class Distribution</h4>
                        <div class="grid grid-cols-2 gap-4">
                            <div class="flex items-center gap-4 bg-green-600/20 rounded-lg p-4">
                                <div class="w-12 h-12 bg-green-600 rounded-full flex items-center justify-center">
                                    <i class="fas fa-check text-white"></i>
                                </div>
                                <div>
                                    <p class="text-sm text-gray-400">Normal Traffic</p>
                                    <p id="datasetNormalCount" class="text-xl font-bold text-green-400">-</p>
                                </div>
                            </div>
                            <div class="flex items-center gap-4 bg-red-600/20 rounded-lg p-4">
                                <div class="w-12 h-12 bg-red-600 rounded-full flex items-center justify-center">
                                    <i class="fas fa-exclamation text-white"></i>
                                </div>
                                <div>
                                    <p class="text-sm text-gray-400">Attack Traffic</p>
                                    <p id="datasetAttackCount" class="text-xl font-bold text-red-400">-</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Custom Dataset Path -->
                <div class="bg-slate-800 rounded-xl p-6">
                    <h3 class="text-xl font-bold mb-4">
                        <i class="fas fa-folder-open text-yellow-400 mr-2"></i>
                        Set Custom Dataset Path
                    </h3>
                    <p class="text-gray-400 mb-4">Enter the path to a folder containing preprocessed data files (X_train_seq.npy, y_train_seq.npy, etc.)</p>
                    <div class="flex gap-4">
                        <input type="text" id="customDatasetPath" placeholder="D:\path\to\processed_data" 
                               class="flex-1 bg-slate-700 border border-slate-600 rounded-lg px-4 py-2">
                        <button onclick="validateDatasetPath()" class="bg-blue-600 hover:bg-blue-700 px-6 py-2 rounded-lg transition">
                            <i class="fas fa-check mr-2"></i>Validate
                        </button>
                    </div>
                    <div id="datasetValidationResult" class="mt-4 hidden"></div>
                </div>
            </div>
            
            <!-- Tab: Compare Results -->
            <div id="tab-compare" class="tab-content">
                <div class="bg-slate-800 rounded-xl p-6 mb-6">
                    <h3 class="text-xl font-bold mb-4">
                        <i class="fas fa-balance-scale text-pink-400 mr-2"></i>
                        Compare Old vs New Results
                    </h3>
                    <div id="compareContainer">
                        <!-- Comparison tables will be generated here -->
                    </div>
                </div>
                
                <!-- Improvement Chart -->
                <div class="bg-slate-800 rounded-xl p-6">
                    <h3 class="text-lg font-bold mb-4">
                        <i class="fas fa-chart-line text-green-400 mr-2"></i>
                        Improvement Analysis
                    </h3>
                    <div style="height: 300px;">
                        <canvas id="improvementChart"></canvas>
                    </div>
                </div>
            </div>
            
            <!-- Tab: History & Reports -->
            <div id="tab-history" class="tab-content">
                <!-- Training History -->
                <div class="bg-slate-800 rounded-xl p-6 mb-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-xl font-bold">
                            <i class="fas fa-history text-indigo-400 mr-2"></i>
                            Training History
                        </h3>
                        <button onclick="clearHistory()" class="text-red-400 hover:text-red-300 text-sm">
                            <i class="fas fa-trash mr-1"></i>Clear History
                        </button>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="metric-table w-full">
                            <thead>
                                <tr class="border-b border-slate-700 text-left">
                                    <th>ID</th>
                                    <th>Date & Time</th>
                                    <th>Models</th>
                                    <th>Epochs</th>
                                    <th>Batch Size</th>
                                    <th>Duration</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody id="trainingHistoryTable">
                                <tr><td colspan="7" class="text-center text-gray-500 py-8">No training history</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- Evaluation History -->
                <div class="bg-slate-800 rounded-xl p-6 mb-6">
                    <h3 class="text-xl font-bold mb-4">
                        <i class="fas fa-clipboard-check text-teal-400 mr-2"></i>
                        Evaluation History
                    </h3>
                    <div class="overflow-x-auto">
                        <table class="metric-table w-full">
                            <thead>
                                <tr class="border-b border-slate-700 text-left">
                                    <th>ID</th>
                                    <th>Date & Time</th>
                                    <th>Models</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody id="evaluationHistoryTable">
                                <tr><td colspan="4" class="text-center text-gray-500 py-8">No evaluation history</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- Reports -->
                <div class="bg-slate-800 rounded-xl p-6">
                    <h3 class="text-xl font-bold mb-4">
                        <i class="fas fa-file-alt text-yellow-400 mr-2"></i>
                        Classification Reports
                    </h3>
                    <div class="flex gap-4 mb-4">
                        <button onclick="loadReport('cnn')" class="bg-blue-600/20 hover:bg-blue-600/30 text-blue-400 px-4 py-2 rounded-lg transition">
                            CNN Report
                        </button>
                        <button onclick="loadReport('lstm')" class="bg-green-600/20 hover:bg-green-600/30 text-green-400 px-4 py-2 rounded-lg transition">
                            LSTM Report
                        </button>
                        <button onclick="loadReport('hybrid')" class="bg-purple-600/20 hover:bg-purple-600/30 text-purple-400 px-4 py-2 rounded-lg transition">
                            Hybrid Report
                        </button>
                    </div>
                    <div id="reportContent" class="log-container bg-slate-900 rounded-lg p-4 min-h-[200px]">
                        <p class="text-gray-500 text-center py-8">Select a report to view</p>
                    </div>
                </div>
            </div>
        </main>
    </div>
    
    <!-- Toast Notification -->
    <div id="toast" class="fixed bottom-4 right-4 bg-slate-800 border border-slate-700 rounded-lg p-4 shadow-xl transform translate-y-20 opacity-0 transition-all duration-300 z-50">
        <div class="flex items-center gap-3">
            <i id="toastIcon" class="fas fa-info-circle text-blue-400"></i>
            <p id="toastMessage" class="text-sm"></p>
        </div>
    </div>

    <script src="/static/js/dashboard.js"></script>
</body>
</html>
